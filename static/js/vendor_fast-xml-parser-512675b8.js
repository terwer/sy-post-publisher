import{s as U}from"./vendor_strnum-597cc196.js";var m={},O={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+t+"]["+s+"]*",r=new RegExp("^"+i+"$"),n=function(o,u){const f=[];let l=u.exec(o);for(;l;){const a=[];a.startIndex=u.lastIndex-l[0].length;const h=l.length;for(let c=0;c<h;c++)a.push(l[c]);f.push(a),l=u.exec(o)}return f},d=function(o){const u=r.exec(o);return!(u===null||typeof u>"u")};e.isExist=function(o){return typeof o<"u"},e.isEmptyObject=function(o){return Object.keys(o).length===0},e.merge=function(o,u,f){if(u){const l=Object.keys(u),a=l.length;for(let h=0;h<a;h++)f==="strict"?o[l[h]]=[u[l[h]]]:o[l[h]]=u[l[h]]}},e.getValue=function(o){return e.isExist(o)?o:""},e.isName=d,e.getAllMatches=n,e.nameRegexp=i})(O);const w=O,Y={allowBooleanAttributes:!1,unpairedTags:[]};m.validate=function(e,t){t=Object.assign({},Y,t);const s=[];let i=!1,r=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let n=0;n<e.length;n++)if(e[n]==="<"&&e[n+1]==="?"){if(n+=2,n=$(e,n),n.err)return n}else if(e[n]==="<"){let d=n;if(n++,e[n]==="!"){n=x(e,n);continue}else{let o=!1;e[n]==="/"&&(o=!0,n++);let u="";for(;n<e.length&&e[n]!==">"&&e[n]!==" "&&e[n]!=="	"&&e[n]!==`
`&&e[n]!=="\r";n++)u+=e[n];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),n--),!Z(u)){let a;return u.trim().length===0?a="Invalid space after '<'.":a="Tag '"+u+"' is an invalid name.",g("InvalidTag",a,p(e,n))}const f=q(e,n);if(f===!1)return g("InvalidAttr","Attributes for '"+u+"' have open quote.",p(e,n));let l=f.value;if(n=f.index,l[l.length-1]==="/"){const a=n-l.length;l=l.substring(0,l.length-1);const h=V(l,t);if(h===!0)i=!0;else return g(h.err.code,h.err.msg,p(e,a+h.err.line))}else if(o)if(f.tagClosed){if(l.trim().length>0)return g("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",p(e,d));{const a=s.pop();if(u!==a.tagName){let h=p(e,a.tagStartPos);return g("InvalidTag","Expected closing tag '"+a.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+u+"'.",p(e,d))}s.length==0&&(r=!0)}}else return g("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",p(e,n));else{const a=V(l,t);if(a!==!0)return g(a.err.code,a.err.msg,p(e,n-l.length+a.err.line));if(r===!0)return g("InvalidXml","Multiple possible root nodes found.",p(e,n));t.unpairedTags.indexOf(u)!==-1||s.push({tagName:u,tagStartPos:d}),i=!0}for(n++;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="!"){n++,n=x(e,n);continue}else if(e[n+1]==="?"){if(n=$(e,++n),n.err)return n}else break;else if(e[n]==="&"){const a=K(e,n);if(a==-1)return g("InvalidChar","char '&' is not expected.",p(e,n));n=a}else if(r===!0&&!v(e[n]))return g("InvalidXml","Extra text at the end",p(e,n));e[n]==="<"&&n--}}else{if(v(e[n]))continue;return g("InvalidChar","char '"+e[n]+"' is not expected.",p(e,n))}if(i){if(s.length==1)return g("InvalidTag","Unclosed tag '"+s[0].tagName+"'.",p(e,s[0].tagStartPos));if(s.length>0)return g("InvalidXml","Invalid '"+JSON.stringify(s.map(n=>n.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return g("InvalidXml","Start tag expected.",1);return!0};function v(e){return e===" "||e==="	"||e===`
`||e==="\r"}function $(e,t){const s=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const i=e.substr(s,t-s);if(t>5&&i==="xml")return g("InvalidXml","XML declaration allowed only at the start of the document.",p(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function x(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let s=1;for(t+=8;t<e.length;t++)if(e[t]==="<")s++;else if(e[t]===">"&&(s--,s===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const _='"',J="'";function q(e,t){let s="",i="",r=!1;for(;t<e.length;t++){if(e[t]===_||e[t]===J)i===""?i=e[t]:i!==e[t]||(i="");else if(e[t]===">"&&i===""){r=!0;break}s+=e[t]}return i!==""?!1:{value:s,index:t,tagClosed:r}}const z=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function V(e,t){const s=w.getAllMatches(e,z),i={};for(let r=0;r<s.length;r++){if(s[r][1].length===0)return g("InvalidAttr","Attribute '"+s[r][2]+"' has no space in starting.",T(s[r]));if(s[r][3]!==void 0&&s[r][4]===void 0)return g("InvalidAttr","Attribute '"+s[r][2]+"' is without value.",T(s[r]));if(s[r][3]===void 0&&!t.allowBooleanAttributes)return g("InvalidAttr","boolean attribute '"+s[r][2]+"' is not allowed.",T(s[r]));const n=s[r][2];if(!Q(n))return g("InvalidAttr","Attribute '"+n+"' is an invalid name.",T(s[r]));if(!i.hasOwnProperty(n))i[n]=1;else return g("InvalidAttr","Attribute '"+n+"' is repeated.",T(s[r]))}return!0}function W(e,t){let s=/\d/;for(e[t]==="x"&&(t++,s=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(s))break}return-1}function K(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,W(e,t);let s=0;for(;t<e.length;t++,s++)if(!(e[t].match(/\w/)&&s<20)){if(e[t]===";")break;return-1}return t}function g(e,t,s){return{err:{code:e,msg:t,line:s.line||s,col:s.col}}}function Q(e){return w.isName(e)}function Z(e){return w.isName(e)}function p(e,t){const s=e.substring(0,t).split(/\r?\n/);return{line:s.length,col:s[s.length-1].length+1}}function T(e){return e.startIndex+e[1].length}var C={};const B={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1},j=function(e){return Object.assign({},B,e)};C.buildOptions=j;C.defaultOptions=B;class H{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,s){this.child.push({[t]:s})}addChild(t){t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}}var D=H;function ee(e,t){const s={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let i=1,r=!1,n=!1,d=!1,o="";for(;t<e.length;t++)if(e[t]==="<"){if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y")t+=7,n=!0;else if(r&&e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T")t+=8;else if(r&&e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N")t+=9;else if(e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-")d=!0;else throw new Error("Invalid DOCTYPE");i++,o=""}else if(e[t]===">"){if(d)if(e[t-1]==="-"&&e[t-2]==="-")d=!1;else throw new Error("Invalid XML comment in DOCTYPE");else n&&(se(o,s),n=!1);if(i--,i===0)break}else e[t]==="["?r=!0:o+=e[t];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:s,i:t}}const te=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function se(e,t){const s=te.exec(e);s&&(t[s[1]]={regx:RegExp(`&${s[1]};`,"g"),val:s[3]})}var ne=ee;const I=O,A=D,re=ne,ie=U;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,I.nameRegexp);class oe{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=ue,this.parseXml=ce,this.parseTextData=fe,this.resolveNameSpace=de,this.buildAttributesMap=ae,this.isItStopNode=pe,this.replaceEntitiesValue=he,this.readStopNodeData=be,this.saveTextToParentTag=ge}}function ue(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const i=t[s];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:e[i]}}}function fe(e,t,s,i,r,n,d){if(e!==void 0&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){d||(e=this.replaceEntitiesValue(e));const o=this.options.tagValueProcessor(t,e,s,r,n);return o==null?e:typeof o!=typeof e||o!==e?o:this.options.trimValues?P(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?P(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function de(e){if(this.options.removeNSPrefix){const t=e.split(":"),s=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=s+t[1])}return e}const le=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ae(e,t){if(!this.options.ignoreAttributes&&typeof e=="string"){const s=I.getAllMatches(e,le),i=s.length,r={};for(let n=0;n<i;n++){const d=this.resolveNameSpace(s[n][1]);let o=s[n][4];const u=this.options.attributeNamePrefix+d;if(d.length)if(o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const f=this.options.attributeValueProcessor(d,o,t);f==null?r[u]=o:typeof f!=typeof o||f!==o?r[u]=f:r[u]=P(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[u]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const n={};return n[this.options.attributesGroupName]=r,n}return r}}const ce=function(e){e=e.replace(/\r\n?/g,`
`);const t=new A("!xml");let s=t,i="",r="";for(let n=0;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){const o=b(e,">",n,"Closing Tag is not closed.");let u=e.substring(n+2,o).trim();if(this.options.removeNSPrefix){const f=u.indexOf(":");f!==-1&&(u=u.substr(f+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),s&&(i=this.saveTextToParentTag(i,s,r)),r=r.substr(0,r.lastIndexOf(".")),s=this.tagsNodeStack.pop(),i="",n=o}else if(e[n+1]==="?"){let o=y(e,n,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,s,r),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){const u=new A(o.tagName);u.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(u[":@"]=this.buildAttributesMap(o.tagExp,r)),s.addChild(u)}n=o.closeIndex+1}else if(e.substr(n+1,3)==="!--"){const o=b(e,"-->",n+4,"Comment is not closed.");if(this.options.commentPropName){const u=e.substring(n+4,o-2);i=this.saveTextToParentTag(i,s,r),s.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}n=o}else if(e.substr(n+1,2)==="!D"){const o=re(e,n);this.docTypeEntities=o.entities,n=o.i}else if(e.substr(n+1,2)==="!["){const o=b(e,"]]>",n,"CDATA is not closed.")-2,u=e.substring(n+9,o);if(i=this.saveTextToParentTag(i,s,r),this.options.cdataPropName)s.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]);else{let f=this.parseTextData(u,s.tagname,r,!0,!1,!0);f==null&&(f=""),s.add(this.options.textNodeName,f)}n=o+2}else{let o=y(e,n,this.options.removeNSPrefix),u=o.tagName,f=o.tagExp,l=o.attrExpPresent,a=o.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),s&&i&&s.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,s,r,!1)),u!==t.tagname&&(r+=r?"."+u:u);const h=s;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(s=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,r,u)){let c="";if(f.length>0&&f.lastIndexOf("/")===f.length-1)n=o.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)n=o.closeIndex;else{const N=this.readStopNodeData(e,u,a+1);if(!N)throw new Error(`Unexpected end of ${u}`);n=N.i,c=N.tagContent}const E=new A(u);u!==f&&l&&(E[":@"]=this.buildAttributesMap(f,r)),c&&(c=this.parseTextData(c,u,r,!0,l,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),E.add(this.options.textNodeName,c),s.addChild(E)}else{if(f.length>0&&f.lastIndexOf("/")===f.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),f=u):f=f.substr(0,f.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const c=new A(u);u!==f&&l&&(c[":@"]=this.buildAttributesMap(f,r)),r=r.substr(0,r.lastIndexOf(".")),s.addChild(c)}else{const c=new A(u);this.tagsNodeStack.push(s),u!==f&&l&&(c[":@"]=this.buildAttributesMap(f,r)),s.addChild(c),s=c}i="",n=a}}else i+=e[n];return t.child},he=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const s=this.docTypeEntities[t];e=e.replace(s.regx,s.val)}for(let t in this.lastEntities){const s=this.lastEntities[t];e=e.replace(s.regex,s.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const s=this.htmlEntities[t];e=e.replace(s.regex,s.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function ge(e,t,s,i){return e&&(i===void 0&&(i=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,s,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,i),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function pe(e,t,s){const i="*."+s;for(const r in e){const n=e[r];if(i===n||t===n)return!0}return!1}function Ne(e,t,s=">"){let i,r="";for(let n=t;n<e.length;n++){let d=e[n];if(i)d===i&&(i="");else if(d==='"'||d==="'")i=d;else if(d===s[0])if(s[1]){if(e[n+1]===s[1])return{data:r,index:n}}else return{data:r,index:n};else d==="	"&&(d=" ");r+=d}}function b(e,t,s,i){const r=e.indexOf(t,s);if(r===-1)throw new Error(i);return r+t.length-1}function y(e,t,s,i=">"){const r=Ne(e,t+1,i);if(!r)return;let n=r.data;const d=r.index,o=n.search(/\s/);let u=n,f=!0;if(o!==-1&&(u=n.substr(0,o).replace(/\s\s*$/,""),n=n.substr(o+1)),s){const l=u.indexOf(":");l!==-1&&(u=u.substr(l+1),f=u!==r.data.substr(l+1))}return{tagName:u,tagExp:n,closeIndex:d,attrExpPresent:f}}function be(e,t,s){const i=s;let r=1;for(;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){const n=b(e,">",s,`${t} is not closed`);if(e.substring(s+2,n).trim()===t&&(r--,r===0))return{tagContent:e.substring(i,s),i:n};s=n}else if(e[s+1]==="?")s=b(e,"?>",s+1,"StopNode is not closed.");else if(e.substr(s+1,3)==="!--")s=b(e,"-->",s+3,"StopNode is not closed.");else if(e.substr(s+1,2)==="![")s=b(e,"]]>",s,"StopNode is not closed.")-2;else{const n=y(e,s,">");n&&((n&&n.tagName)===t&&n.tagExp[n.tagExp.length-1]!=="/"&&r++,s=n.closeIndex)}}function P(e,t,s){if(t&&typeof e=="string"){const i=e.trim();return i==="true"?!0:i==="false"?!1:ie(e,s)}else return I.isExist(e)?e:""}var Ee=oe,X={};function Te(e,t){return R(e,t)}function R(e,t,s){let i;const r={};for(let n=0;n<e.length;n++){const d=e[n],o=Ae(d);let u="";if(s===void 0?u=o:u=s+"."+o,o===t.textNodeName)i===void 0?i=d[o]:i+=""+d[o];else{if(o===void 0)continue;if(d[o]){let f=R(d[o],t,u);const l=Pe(f,t);d[":@"]?ye(f,d[":@"],u,t):Object.keys(f).length===1&&f[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?f=f[t.textNodeName]:Object.keys(f).length===0&&(t.alwaysCreateTextNode?f[t.textNodeName]="":f=""),r[o]!==void 0&&r.hasOwnProperty(o)?(Array.isArray(r[o])||(r[o]=[r[o]]),r[o].push(f)):t.isArray(o,u,l)?r[o]=[f]:r[o]=f}}}return typeof i=="string"?i.length>0&&(r[t.textNodeName]=i):i!==void 0&&(r[t.textNodeName]=i),r}function Ae(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const i=t[s];if(i!==":@")return i}}function ye(e,t,s,i){if(t){const r=Object.keys(t),n=r.length;for(let d=0;d<n;d++){const o=r[d];i.isArray(o,s+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function Pe(e,t){const s=Object.keys(e).length;return!!(s===0||s===1&&e[t.textNodeName])}X.prettify=Te;const{buildOptions:me}=C,Oe=Ee,{prettify:we}=X,Ce=m;class Ie{constructor(t){this.externalEntities={},this.options=me(t)}parse(t,s){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(s){s===!0&&(s={});const n=Ce.validate(t,s);if(n!==!0)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const i=new Oe(this.options);i.addExternalEntities(this.externalEntities);const r=i.parseXml(t);return this.options.preserveOrder||r===void 0?r:we(r,this.options)}addEntity(t,s){if(s.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(s==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=s}}var Se=Ie;const ve=`
`;function $e(e,t){return k(e,t,"",0)}function k(e,t,s,i){let r="",n="";t.format&&t.indentBy.length>0&&(n=ve+""+t.indentBy.repeat(i));for(let d=0;d<e.length;d++){const o=e[d],u=xe(o);let f="";if(s.length===0?f=u:f=`${s}.${u}`,u===t.textNodeName){let c=o[u];Ve(f,t)||(c=t.tagValueProcessor(u,c),c=G(c,t)),r+=n+c;continue}else if(u===t.cdataPropName){r+=n+`<![CDATA[${o[u][0][t.textNodeName]}]]>`;continue}else if(u===t.commentPropName){r+=n+`<!--${o[u][0][t.textNodeName]}-->`;continue}else if(u[0]==="?"){const c=F(o[":@"],t),E=u==="?xml"?"":n;let N=o[u][0][t.textNodeName];N=N.length!==0?" "+N:"",r+=E+`<${u}${N}${c}?>`;continue}const l=F(o[":@"],t);let a=n+`<${u}${l}`,h=k(o[u],t,f,i+1);t.unpairedTags.indexOf(u)!==-1?t.suppressUnpairedNode?r+=a+">":r+=a+"/>":(!h||h.length===0)&&t.suppressEmptyNode?r+=a+"/>":r+=a+`>${h}${n}</${u}>`}return r}function xe(e){const t=Object.keys(e);for(let s=0;s<t.length;s++){const i=t[s];if(i!==":@")return i}}function F(e,t){let s="";if(e&&!t.ignoreAttributes)for(let i in e){let r=t.attributeValueProcessor(i,e[i]);r=G(r,t),r===!0&&t.suppressBooleanAttributes?s+=` ${i.substr(t.attributeNamePrefix.length)}`:s+=` ${i.substr(t.attributeNamePrefix.length)}="${r}"`}return s}function Ve(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let s=e.substr(e.lastIndexOf(".")+1);for(let i in t.stopNodes)if(t.stopNodes[i]===e||t.stopNodes[i]==="*."+s)return!0;return!1}function G(e,t){if(e&&e.length>0&&t.processEntities)for(let s=0;s<t.entities.length;s++){const i=t.entities[s];e=e.replace(i.regex,i.val)}return e}var Fe=$e;const Le=Fe,Me={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],transformTagName:!1};function S(e){this.options=Object.assign({},Me,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ye),this.processTextOrObjNode=Xe,this.options.format?(this.indentate=Ue,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=Ge,this.buildObjNode=Re):(this.buildTextNode=M,this.buildObjNode=L),this.buildTextValNode=M,this.buildObjectNode=L,this.replaceEntitiesValue=ke,this.buildAttrPairStr=Be}S.prototype.build=function(e){return this.options.preserveOrder?Le(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};S.prototype.j2x=function(e,t){let s="",i="";for(let r in e)if(!(typeof e[r]>"u"))if(e[r]===null)r[0]==="?"?i+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)i+=this.buildTextNode(e[r],r,"",t);else if(typeof e[r]!="object"){const n=this.isAttribute(r);if(n)s+=this.buildAttrPairStr(n,""+e[r]);else if(r===this.options.textNodeName){let d=this.options.tagValueProcessor(r,""+e[r]);i+=this.replaceEntitiesValue(d)}else i+=this.buildTextNode(e[r],r,"",t)}else if(Array.isArray(e[r])){const n=e[r].length;for(let d=0;d<n;d++){const o=e[r][d];typeof o>"u"||(o===null?r[0]==="?"?i+=this.indentate(t)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar:typeof o=="object"?i+=this.processTextOrObjNode(o,r,t):i+=this.buildTextNode(o,r,"",t))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){const n=Object.keys(e[r]),d=n.length;for(let o=0;o<d;o++)s+=this.buildAttrPairStr(n[o],""+e[r][n[o]])}else i+=this.processTextOrObjNode(e[r],r,t);return{attrStr:s,val:i}};function Be(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'}function Xe(e,t,s){const i=this.j2x(e,s+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextNode(e[this.options.textNodeName],t,i.attrStr,s):this.buildObjNode(i.val,t,i.attrStr,s)}function L(e,t,s,i){let r="</"+t+this.tagEndChar,n="";return t[0]==="?"&&(n="?",r=""),s&&e.indexOf("<")===-1?this.indentate(i)+"<"+t+s+n+">"+e+r:this.options.commentPropName!==!1&&t===this.options.commentPropName&&n.length===0?this.indentate(i)+`<!--${e}-->`+this.newLine:this.indentate(i)+"<"+t+s+n+this.tagEndChar+e+this.indentate(i)+r}function Re(e,t,s,i){return e!==""?this.buildObjectNode(e,t,s,i):t[0]==="?"?this.indentate(i)+"<"+t+s+"?"+this.tagEndChar:this.indentate(i)+"<"+t+s+"/"+this.tagEndChar}function M(e,t,s,i){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(i)+`<!--${e}-->`+this.newLine;{let r=this.options.tagValueProcessor(t,e);return r=this.replaceEntitiesValue(r),r===""&&this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode?this.indentate(i)+"<"+t+this.tagEndChar:this.indentate(i)+"<"+t+"/"+this.tagEndChar:this.indentate(i)+"<"+t+s+">"+r+"</"+t+this.tagEndChar}}function ke(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const s=this.options.entities[t];e=e.replace(s.regex,s.val)}return e}function Ge(e,t,s,i){return e===""&&this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode?this.indentate(i)+"<"+t+this.tagEndChar:this.indentate(i)+"<"+t+"/"+this.tagEndChar:e!==""?this.buildTextValNode(e,t,s,i):t[0]==="?"?this.indentate(i)+"<"+t+s+"?"+this.tagEndChar:this.indentate(i)+"<"+t+s+"/"+this.tagEndChar}function Ue(e){return this.options.indentBy.repeat(e)}function Ye(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}var _e=S;const Je=m,qe=Se,ze=_e;var Ke={XMLParser:qe,XMLValidator:Je,XMLBuilder:ze};export{Ke as f};
