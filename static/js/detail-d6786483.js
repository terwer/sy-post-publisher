import{L as e,w as o,b as s,W as t,j as a,t as r,f as i,r as n,B as d,c as p,v as l,k as c,_ as m,p as v}from"./AppLayout.vue_vue_type_script_setup_true_lang-59c75e45.js";import{a as u,E as _}from"./vendor_element-plus-6396cda2.js";import{_ as j}from"./PostDetailService.vue_vue_type_style_index_0_lang-7bbbaeec.js";import{O as b,u as f,A as y,P as g,Q as h,a2 as w,V as x,$ as S,a0 as k,_ as I,U as P}from"./vendor-42595716.js";import"./vendor_rollup-plugin-node-polyfills-64e646dc.js";import"./vendor_before-after-hook-6380be1a.js";import"./vendor_pinia-ecc357ef.js";import"./vendor_vue-demi-2d1e3e69.js";import"./vendor_vue-i18n-8a61efa7.js";import"./vendor_highlight-js-1b1ee527.js";import"./vendor_plantuml-encoder-18698577.js";import"./vendor_loglevel-bd2e1c44.js";import"./vendor_loglevel-plugin-prefix-34a2ac06.js";import"./vendor_browser-fs-access-16ccdee9.js";import"./vendor_transliteration-0556f169.js";import"./vendor_shorthash2-e60185c0.js";import"./vendor_uuid-520e9b68.js";import"./vendor_js-yaml-c400b4ba.js";import"./vendor_js-base64-2ae562d2.js";import"./vendor_sax-d77c0d7b.js";import"./vendor_simple-xmlrpc-0d78c765.js";import"./vendor_cross-fetch-e4e57030.js";import"./vendor_byte-base64-0dbd845f.js";import"./vendor_xmlbuilder2-780b1a8c.js";import"./vendor_lodash-es-625d2651.js";import"./vendor_lodash-37b14d55.js";import"./vendor_dayjs-60c4937a.js";import"./vendor_async-validator-4b9a0ab1.js";import"./vendor_escape-html-2f5becbc.js";import"./vendor_normalize-wheel-es-b14b3a0e.js";import"./vendor_universal-user-agent-04461c7d.js";import"./vendor_is-plain-object-eb550d51.js";import"./vendor_deprecation-ea02905c.js";import"./vendor_once-6031544f.js";import"./vendor_wrappy-713fc6dc.js";const D={class:"post-detail-content-box"},q={key:0,class:"btn-publish"},z=c(b({__name:"PostDetail",props:{pageId:{type:String,default:void 0}},setup(c){const m=c,v=e.getLogger("components/detail/PostDetail.vue"),b=f(""),P=new l,z=f(s()),A=async()=>{t().isInSiyuan?a(r("/index.html?id=",b.value)):a(r("/publish/index.html?id=",b.value))},B=async()=>{const e=i(),o=await P.getBlockByID(b.value);let s=o.content;e.fixTitle&&(s=n(o.content)),document.title=s+" - 由思源笔记发布辅助工具导出",document.querySelector(".header-default").remove(),document.querySelector(".btn-publish").remove(),document.querySelector(".post-detail-id").remove(),document.querySelector(".footer").remove(),window.print()},L=()=>{_.success("通过打印导出PDF完成"),d()};return y((async()=>{await(async()=>{const e=await p(!0,m.pageId);v.debug("pageId=>",e),e&&""!==e&&(b.value=e)})(),o()&&(window.onafterprint=L)})),(e,o)=>{const s=u;return g(),h("div",D,[z.value?I("",!0):(g(),h("div",q,[w(s,{size:"small",type:"primary",onClick:A},{default:x((()=>[S(k(e.$t("post.detail.index.send.to.publish")),1)])),_:1}),w(s,{size:"small",type:"success",onClick:B},{default:x((()=>[S(k(e.$t("post.detail.index.export.to.pdf")),1)])),_:1})])),w(j,{"page-id":b.value},null,8,["page-id"])])}}}),[["__scopeId","data-v-38ca9324"]]),A=b({__name:"App",setup:e=>(e,o)=>(g(),P(m,null,{default:x((()=>[w(z)])),_:1}))});(async()=>{(await v.createPage(A)).mount("#app")})();
